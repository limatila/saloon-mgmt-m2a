{% comment %}
  Template de link para preservar a URL de redirecionamento (next)
  Funciona em links (GET).
  Pode receber 'next' diretamente via include with, ou pega do request.
{% endcomment %}

<a href="{% url url_resolve  %}?{{ query }}&next={{ request.get_full_path|urlencode }}" class="{{ classes }}">{{ link_text }}</a>